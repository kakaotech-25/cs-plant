# 로드밸런싱

## 로드밸런서의 사용 목적

- 부하 분산: 서버에 가해지는 트래픽이나 작업 부하를 여러 서버로 분산시켜 각 서버의 부담을 줄입니다.
- 고가용성: 서버 중 하나에 장애가 발생하더라도 서비스가 지속되도록 다른 서버로 요청을 전환합니다.
- 확장성: 트래픽 증가에 따라 서버를 추가하거나 제거하여 유연한 시스템 확장이 가능합니다.
- 보안 강화: 로드밸런서에서 SSL 종료나 방화벽 기능을 수행하여 백엔드 서버의 보안을 강화합니다.
- 유지보수 편의성: 서버의 점검이나 업데이트 시 로드밸런서를 통해 트래픽을 다른 서버로 유도하여 무중단 서비스를 제공합니다.

## 로드밸런싱의 계층별 분류

로드밸런싱은 OSI 7계층 모델에 따라 계층별로 분류할 수 있습니다.

### L4 로드밸런싱 (전송 계층)

- 동작 방식: IP 주소와 포트 번호 등의 전송 계층 정보를 기반으로 트래픽을 분산합니다.
- 특징:
  - 빠른 처리 속도와 낮은 지연 시간.
  - 세션 정보를 유지하지 않으므로 무상태(Stateless) 방식.
- 사용 예: TCP, UDP 기반의 서비스에 적합.

### L7 로드밸런싱 (애플리케이션 계층)

- 동작 방식: HTTP 헤더, 쿠키, URL 패턴 등의 애플리케이션 계층 정보를 기반으로 트래픽을 분산합니다.
- 특징:
  - 세션 스티키(Session Sticky) 등 세션 유지가 가능.
  - 콘텐츠 기반 라우팅이 가능하여 특정 요청을 특정 서버로 전달 가능.
- 사용 예: 웹 서비스, API 서버 등 HTTP/HTTPS 기반의 서비스에 적합.

## 로드밸런서 서비스의 종류

### 하드웨어 로드밸런서

- 설명: 전용 하드웨어 장비를 사용하여 로드밸런싱을 수행합니다.
- 장점:
  - 높은 성능과 안정성.
  - 전문적인 지원 및 유지보수.
- 단점:
  - 높은 초기 비용.
  - 유연성 부족.
- 대표 제품: F5 Networks의 BIG-IP, Citrix의 NetScaler.

### 소프트웨어 로드밸런서

- 설명: 소프트웨어를 사용하여 로드밸런싱을 구현하며, 일반적인 서버나 클라우드 인스턴스에서 실행됩니다.
- 장점:
  - 낮은 비용.
  - 높은 유연성과 확장성.
- 단점:
  - 하드웨어 대비 성능이 낮을 수 있음.
  - 설정 및 관리에 대한 전문 지식 필요.
- 대표 소프트웨어: Nginx, HAProxy, Apache Traffic Server.

### 클라우드 로드밸런서

- 설명: 클라우드 서비스 제공자가 제공하는 로드밸런싱 서비스로, 인프라 설정 없이 쉽게 사용할 수 있습니다.
- 장점:
  - 간편한 설정과 관리.
  - 자동 확장 및 고가용성 지원.
  - 사용량 기반 과금으로 비용 효율적.
- 단점:
  - 서비스 제공자에 종속적.
  - 커스터마이징 제한.
- 대표 서비스:
  - AWS Elastic Load Balancing
  - Google Cloud Load Balancing
  - Microsoft Azure Load Balancer

### 3.4 DNS 기반 로드밸런싱

- 설명: DNS 서버에서 하나의 도메인 이름에 여러 개의 IP 주소를 매핑하여 트래픽을 분산합니다.
- 장점:
  - 간단한 설정.
  - 지리적 로드밸런싱 가능.
- 단점:
  - 부하 상태를 반영하지 못함.
  - DNS 캐싱으로 인해 실시간 제어 어려움.
- 사용 예: 글로벌 서비스에서 지역별 서버로 트래픽 분산.

### 참고 자료

- [Nginx 공식 문서](https://nginx.org/en/docs/)
- [HAProxy 공식 웹사이트](http://www.haproxy.org/)
- [AWS Elastic Load Balancing 소개](https://aws.amazon.com/elasticloadbalancing/)
- [로드밸런싱 위키백과](https://ko.wikipedia.org/wiki/%EB%A1%9C%EB%93%9C_%EB%B0%B8%EB%9F%B0%EC%8B%B1)
