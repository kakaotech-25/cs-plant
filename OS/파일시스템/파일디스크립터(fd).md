# 파일 디스크립터(File Descriptor)

## 파일 디스크립터란?

파일 디스크립터(File Descriptor), 줄여서 FD라고도 한다. <br>
파일 디스크립터는 운영체제에서 파일, 소켓, 파이프, 디렉토리, 프로세스 등 다양한 리소스를 다룰 때 사용하는 일종의 핸들이다. <br>
이 글에서는 파일 디스크립터가 정확히 무엇인지, 그리고 실생활에서 어떻게 사용하는지 쉽게 설명한다. <br>

파일 디스크립터는 사실 숫자다. 이 숫자는 프로세스가 운영체제에 의해 열려 있는 파일이나 리소스를 참조할 수 있게 한다. <br>
예를 들어, 파일을 열었을 때 운영체제는 그 파일을 나타내는 파일 디스크립터를 반환한다. <br>
그리고 이 파일 디스크립터를 통해 파일을 읽거나 쓰는 작업을 수행한다. <br>

운영체제는 파일 디스크립터를 통해 어떤 리소스를 참조하는지 추적한다. <br>
그래서 프로세스가 여러 개의 파일을 열고 있더라도 각각의 파일 디스크립터를 통해 어떤 파일을 가리키는지 정확히 알 수 있다. <br>

## 파일 디스크립터의 사용 예

<mark> 리눅스에서는 파이프, 프로세스, 소켓, 세마포어, 파일, 디렉토리 등 모든 것을 파일디스크립터로 관리한다.</mark>

- **파일 입출력**: 파일을 열 때 `open()` 함수를 호출하고, 이 함수는 파일 디스크립터를 반환한다. <br>
  이후, `read()`나 `write()` 함수를 호출할 때 이 파일 디스크립터를 인자로 전달해 파일을 읽거나 쓴다. <br>

- **소켓 통신**: 네트워크 소켓도 파일 디스크립터를 통해 관리한다. `socket()` 함수를 호출하면 소켓을 나타내는 파일 디스크립터를 반환받는다. <br>
  이후, 이 파일 디스크립터를 사용해 데이터를 송수신한다. <br>

- **파이프와 프로세스 간 통신**: 프로세스 간에 데이터를 주고받을 때도 파이프를 사용하고, 이 파이프는 파일 디스크립터로 관리된다. <br>
  프로세스는 파일 디스크립터를 통해 파이프에 데이터를 쓰고 읽는다. <br>

- **디렉토리 핸들링**: 디렉토리를 열 때도 파일 디스크립터가 사용된다. `opendir()` 함수는 디렉토리를 열고, 이 디렉토리의 파일 디스크립터를 반환한다. <br>
  이후 `readdir()` 같은 함수를 통해 디렉토리 내 파일 목록을 가져올 수 있다. <br>

## 파일 디스크립터 관리하기

파일 디스크립터를 사용한 후에는 반드시 닫아야 한다. <br>
파일을 다 사용한 후에는 `close()` 함수를 호출해 해당 파일 디스크립터를 닫아 리소스를 해제한다. <br>
파일 디스크립터를 닫지 않으면 리소스 누수(leak)가 발생할 수 있다. <br>
리소스 누수는 시스템 자원을 고갈시켜 성능 저하나 시스템 장애를 유발할 수 있다. <br>
