# 페이지 교체 알고리즘

#### 페이지 프로세스가 요구한 페이지가 현재 메모리에 없을 경우 페이지 부재가 발생하고 스왑 영역에서 페이지를 메모리로 가져온다. 이때 메모리가 다 찼을 경우 추가로 페이지를 가져오기 위해서는 사용하지 않는 페이지를 스왑 영역으로 보내고 해당 영역에 필요한 페이지를 넣어야 한다.
#### 페이지 교체 알고리즘은 스왑 영역으로 보낼 알고리즘을 결정하는 알고리즘으로 페이지의 부재율을 최소화하여 시스템의 성능을 향상하는 것에 목표를 두고 있다.


## 1. FIFO (First In First Out)

- 페이지 교체시 시간 상으로 물리 메모리에 가장 먼저 들어온 페이지를 대상 페이지로 선정하여 스왑 아웃한다.
- 가장 간단한 방법으로 들어온 시간을 저장하거나 올라온 순서를 큐에 저장하는 방식으로 구현한다.
- 큐로 구현하면 새로운 페이지는 항상 맨 아래에 삽입되는 데 이때 메모리가 꽉 차면 맨 위의 페이지가 스왑아웃되고 나머지 페이지들이 위쪽으로 이동하여 새로운 페이지가 맨 아래로 들어온다.
- 단점 : 페이지의 향후 참조 가능성을 고려하지 않고 들어온 순서대로 스왑아웃을 진행하기에 페이지부재가 빈번하게 발생하여 비효율적인 결과를 가져올 수 있다.

## 2. OPT (Optimal)

- 앞으로 사용할 페이지를 미리 살펴보고 페이지 교체 선정 시점부터 사용 시점까지 가장 멀리있는 페이지, 즉 앞으로 사용하지 않을 가능성이 높은 페이지를 선정하여 스왑 아웃한다.
- FIFO에 비해 페이지의 결함횟수를 많이 감소시킬 수 있지만 실제로는 미래의 접근 패턴을 알 수 없기에 구현이 불가능한 알고리즘이다.
- 페이지 부재율이 가장 낮은 효율적 알고리즘이지만 비교 연구 목적을 위해서만 사용되고 있다.

## 3. LRU (Latest Recently Used)

- 메모리에 올라온 후 가장 오랫동안 사용되지 않은 페이지를 스왑 아웃한다.
- 최근에 참조된 페이지가 가까운 미래에 다시 참조될 가능성이 높다는 시간지역성 성질을 고려한 알고리즘이다.
- 사용된 시간을 알 수 있는 부분을 저장하여 가장 오랫동안 참조되지 않는 데이터를 제거해야 하기 때문에 페이지마다 카운터가 필요하다.
- 큐로 구현하면 사용한 데이터를 큐에서 제거하여 맨위로 다시 올리고 프레임이 모자랄 경우 맨 아래에 있는 데이터를 삭제하면 된다.
- OPT의 경우에는 미래예측이지만 LRU의 경우는 과거의 데이터로 판단하므로 실질적으로 구현이 가능하기에 실제 사용할 수 있는 페이지 교체 알고리즘에서는 가장 좋은 방법 중 하나이다.
- 단점 : 프로세스가 주기억장치에 접근할 때마다 참조된 페이지 시간을 기록해야 하므로 막대한 오버헤드가 발생한다.

## 4. LFU (Latest Frequently Used)

- 페이지가 몇 번 사용되었는지를 기준으로 대상 페이지를 선정한다. 즉 현재 프레인에 있는 페이지마다 그동안 사용된 횟수를 세어 횟수가 가장 적은 페이지를 스왑 아웃한다.
- LRU는 직전 참조된 시점만을 반영하지만 LFU는 참조횟수를 통해 장기적 시간 규모에서의 참조성향을 고려할 수 있다.
- 단점 : 가장 최근에 불러온 페이지가 교체될 수 있기에 시간에 따른 페이지 참조의 변화를 반영하지 못하고 LRU보다 구현이 복잡하다.

## 5. NUR (Not Recently page)

- LRU, LFU 알고리즘과 성능이 거의 비슷하면서도 불필요한 메모리 공간 낭비 문제를 해결한 페이지 교체 알고리즘이다. 추가적인 메모리 공간은 사용하지 않고 두개의 비트를 이용해서 대상 페이지를 선정한다.
- LRU를 근사시킨 알고리즘이라고 하며 오랫동안 사용하지 않은 페이지 중 하나를 교체한다. 이로 인해 적은 오버헤드로 적절한 성능을 유지할 수 있다.
- 각 페이지 마다 참조비트, 변형비트가 사용된다.
- 참조비트 : 페이지가 참조되지 않았을 때 0, 호출되었을 때 1 (모든 참조비트를 주기적으로 0으로 변경)
- 변형비트 : 페이지 내용이 변경되지 않았을 대 0, 변경되었을 때 1
- 두 비트의 사용으로 LRU에 비해 스왑 아웃할 페이지가 훨씬 빠르게 선정되어 대부분의 시스템에서 페이지교체알고리즘으로 선택하고 있다.
- 단점 : 최근에 참조되지 않은 페이지를 교체 대상으로 선정하는 측면에서 LRU와 비슷하지만 교체되는 페이지의 참조 시점이 가장 오래되었다는 걸 보장하지 못한다.