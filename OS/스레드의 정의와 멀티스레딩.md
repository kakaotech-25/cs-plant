# 스레드의 정의와 멀티스레딩   

## 스레드란?
### 스레드와 프로세스
- **프로세스**
  - 운영체제로부터 시스템 자원을 할당받는 작업 단위
  - 컴퓨터에서 실행 중인  동적인 상태의 프로그램
  - 프로세스당 하나 이상의 스레드를 포함 -> 각 스레드는 독립적으로 실행
  - 독립된 메모리 영역: Code, Data, Heap, Stack 구조의 메모리 영역을 다른 프로세스와 공유하지 않음

- **스레드**
  - 프로세스의 실행 주체
  - 프로세스 내 작업의 흐름
  - 프로세스가 할당 받은 자원으로 실행하는 가장 작은 실행 단위 (프로세스보다 훨씬 가벼운 실행 단위)
  - 메모리 공유: 프로세스와 달리 스레드는 메모리 영역인 Code, Data, Heap, Stack 중 Stack만 따로 할당받고 나머지 영역을 공유
    - 공유 메모리 영역
      - Code: 프로그램의 실행 코드가 저장된 영역
      - Data: 전역 변수 및 정적 변수가 저장된 영역
      - Heap: 동적 메모리가 저장된 영역
    - 개별 메모리 영역
      - Stack: 각 스레드마다 독립적으로 할당, 지역 변수 및 함수 호출 정보 저장
<table>
  <tr>
    <td><h4>프로세스</h4></td>
    <td><h4>스레드(멀티스레딩)</h4></td>
  </tr>
  <tr>
    <td><img width="960" alt="Untitled-4" src="https://github.com/user-attachments/assets/9f3c951e-19c2-49b9-af96-b43a0a6634cb"></td>
    <td><img width="896" alt="Untitled-5" src="https://github.com/user-attachments/assets/de05fb5c-3315-43ee-aca0-7eee608c4c32"></td>
  </tr>
</table>

## 멀티스레딩이란?
- 운영체제가 하나의 프로세스 내에서 수행되는 여러 개의 스레드를 지원하는 기능

- 동시성과 병렬성을 구현하기 위한 기술
  - 동시성
    - 여러 작업이 동시에 실행되는 것"처럼" 보이는 상태
    - 실제로는 하나의 CPU 코어에서 여러 개의 스레드가 빠르게 번갈아 가며 실행하는 것
    - ex) 웹 브라우저의 여러 탭과 같이 여러 작업이 동시에 발생하는 경우 -> 시스템 효율성 향상 및 사용자 경험 개선
  - 병렬성
    - 여러 작업이 "실제로" 동시에 실행되는 상태
    - 여러 개의 CPU 코어에서 한 개 이상의 스레드를 포함하여 물리적으로 동시에 여러 작업을 처리하는 것
    - ex) 동영상 렌더링과 같이 큰 작업량이 존재하는 경우 -> 성능 향상

- 여러 개의 작업이 오랫동안 실행되는 경우 적합

  - 작은 명령들을 한꺼번에 실행하려고 각 명령마다 스레드를 생성하면 스레드의 수가 지나치게 많아지고 수명도 짧아짐   
    -> 비효율적 -> **스레드 풀**을 사용하여 리소스를 절약하며 스레드 수명 주기 문제 완화하고 효율적으로 관리 가능
 
  - 스레드 풀을 사용해도 동시에 활성화된 스레드 수가 많으면 스레드 수가 CPU 코어 수를 초과하게 되어 CPU 리소스를 차지하기 위한 스레드 간의 경쟁이 발생할 수 있음 -> **컨텍스트 스위칭**이 빈번하게 발생

  - 컨텍스트 스위칭은 현재 실행 중인 작업을 이어서 수행할 수 있도록 실행 중인 스레드 상태를 저장하고 다른 스레드에 대한 작업을 처리한 뒤 첫 번째 스레드의 상태를 복원하여 작업을 계속하는 과정 -> 리소스를 많이 소모하여 가급적 사용하는 것을 지양

  > 스레드 풀: 미리 일정 개수의 스레드를 생성하여 관리하는 기법    
  > 컨텍스트 스위칭: 프로세스나 스레드 간의 전환을 관리하는 기술

---
### 면접질문
- 스레드와 프로세스의 차이
- 멀티스레딩의 동시성과 병렬성
